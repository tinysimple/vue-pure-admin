var m=(n,c,a)=>new Promise((s,o)=>{var p=t=>{try{i(a.next(t))}catch(r){o(r)}},l=t=>{try{i(a.throw(t))}catch(r){o(r)}},i=t=>t.done?s(t.value):Promise.resolve(t.value).then(p,l);i((a=a.apply(n,c)).next())});import{x as g,p as d,y as C,b as z,ba as T,ad as P,aC as b,br as R,r as Y}from"./index-BbxVbw8z.js";import{a as w}from"./system-BCzAIWON.js";import{u as x}from"./hooks-BSpOVEtX.js";function k(n){const c=g({module:"",status:"",operatingTime:""}),a=d([]),s=d(!0),o=d(0),{tagStyle:p}=x(),l=g({total:0,pageSize:10,currentPage:1,background:!0}),i=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"序号",prop:"id",minWidth:90},{label:"操作人员",prop:"username",minWidth:100},{label:"所属模块",prop:"module",minWidth:140},{label:"操作概要",prop:"summary",minWidth:140},{label:"操作 IP",prop:"ip",minWidth:100},{label:"操作地点",prop:"address",minWidth:140},{label:"操作系统",prop:"system",minWidth:100},{label:"浏览器类型",prop:"browser",minWidth:100},{label:"操作状态",prop:"status",minWidth:100,cellRenderer:({row:e,props:W})=>z(Y("el-tag"),{size:W.size,style:p.value(e.status)},{default:()=>[e.status===1?"成功":"失败"]})},{label:"操作时间",prop:"operatingTime",minWidth:180,formatter:({operatingTime:e})=>T(e).format("YYYY-MM-DD HH:mm:ss")}];function t(e){}function r(e){}function f(e){o.value=e.length,n.value.setAdaptive()}function h(){o.value=0,n.value.getTableRef().clearSelection()}function v(){const e=n.value.getTableRef().getSelectionRows();b(`已删除序号为 ${R(e,"id")} 的数据`,{type:"success"}),n.value.getTableRef().clearSelection(),u()}function S(){b("已删除所有日志数据",{type:"success"}),u()}function u(){return m(this,null,function*(){s.value=!0;const{data:e}=yield w(P(c));a.value=e.list,l.total=e.total,l.pageSize=e.pageSize,l.currentPage=e.currentPage,setTimeout(()=>{s.value=!1},500)})}const y=e=>{e&&(e.resetFields(),u())};return C(()=>{u()}),{form:c,loading:s,columns:i,dataList:a,pagination:l,selectedNum:o,onSearch:u,clearAll:S,resetForm:y,onbatchDel:v,handleSizeChange:t,onSelectionCancel:h,handleCurrentChange:r,handleSelectionChange:f}}export{k as useRole};
